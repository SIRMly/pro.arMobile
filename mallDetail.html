<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache"/>
    <meta name="renderer" content="webkit"/>
    <meta name="author" content="SIRMly">
    <meta name="keywords" content="安仁乐道"/>
    <meta name="description" content="安仁乐道"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/swiper.min.css"/>
    <link rel="stylesheet" href="css/mall.css"/>
    <title>安仁乐道</title>
</head>
<body>
<div class="page">
    <div class="bottom-bar">
        <div class="detail-bottom clearfix">
            <a href="mallShoppingCarl.html" class="to-car-btn pull-left"></a>
            <a href="javascript:;" class="add-car-btn pull-left">加入购物车</a>
            <a href="javascript:;" class="detail-buy-btn pull-right">立即购买</a>
        </div>
    </div>
    <div class="container">
        <div class="content">
            <div class="swiper-container" id="detail-swiper">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide">
                            <img src="img/mall-detail.png" alt=""/>
                            <p>1/4</p>
                        </div>
                        <div class="swiper-slide">
                            <img src="img/mall-detail.png" alt=""/>
                            <p>2/4</p>
                        </div>
                        <div class="swiper-slide">
                            <img src="img/mall-detail.png" alt=""/>
                            <p>3/4</p>
                        </div>
                        <div class="swiper-slide">
                            <img src="img/mall-detail.png" alt=""/>
                            <p>4/4</p>
                        </div>
                    </div>
                </div>
            <div class="detail-info">
                <p class="info-name">意式经典浓缩特浓咖啡</p>
                <p class="info-price">¥ 25.50</p>
            </div>
            <div class="detail-content">
                <div class="d-tab-box">
                    <ul class="d-tab-controller flex ver-stretch her-stretch">
                        <li class="active">
                            <a href="javascript:;">商品参数</a>
                        </li>
                        <li>
                            <a href="javascript:;">购买记录</a>
                        </li>
                        <li>
                            <a href="javascript:;">商品详情</a>
                        </li>
                    </ul>
                </div>
                <div class="detail-desc">
                    <div class="detail-desc-box">
                        <p class="detail-desc-title">商品参数</p>
                        <p class="detail-desc-titleE">Commodity parameter</p>
                        <ul class="m-detail-params">
                            <li class="clearfix">
                                <span>安仁店家</span>
                                <span>那时花开</span>
                            </li>
                            <li class="clearfix">
                                <span>规格</span>
                                <span>极硬豆／高硬豆／硬豆</span>
                            </li>
                            <li class="clearfix">
                                <span>咖啡种类</span>
                                <span>意大利咖啡</span>
                            </li>
                            <li class="clearfix">
                                <span>净含量</span>
                                <span>600克</span>
                            </li>
                            <li class="clearfix">
                                <span>包装方式</span>
                                <span>包装</span>
                            </li>
                        </ul>
                    </div>
                    <div class="detail-desc-box">
                        <p class="detail-desc-title">购买记录</p>
                        <p class="detail-desc-titleE">Purchase record</p>
                        <div class="m-record-item">
                            <img src="img/header.png" alt="" class="m-record-header"/>
                            <div class="m-record-content">
                                <p class="m-record-name">我我我</p>
                                <p class="m-record-main">是不是真的呀，看上去很不错。就怕去了以后和以前去的那些一样都很商业化，很破坏气氛。</p>
                            </div>
                        </div>
                        <a href="javascript:;" class="m-record-btn"></a>
                    </div>
                    <div class="detail-desc-box">
                        <p class="detail-desc-title">商品详情</p>
                        <p class="detail-desc-titleE">Commodity details</p>
                        <div class="m-d-desc">
                            <p>是不是真的呀，看上去很不错。就怕去了以后和以前去的那些一样都很商业化，很破坏气氛。</p>
                            <p>是不是真的呀，看上去很不错。就怕去了以后和以前去的那些一样都很商业化，很破坏气氛。</p>
                            <p><img src="img/mall-detail.png" alt=""/></p>
                            <p>是不是真的呀，看上去很不错。就怕去了以后和以前去的那些一样都很商业化，很破坏气氛。</p>
                            <p><img src="img/mall-detail.png" alt=""/></p>
                            <p>是不是真的呀，看上去很不错。就怕去了以后和以前去的那些一样都很商业化，很破坏气氛。</p>
                            <p><img src="img/mall-detail.png" alt=""/></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="page de-car-crash">
        <div class="crash"></div>
        <div class="detail-car">
            <p class="d-c-title">意式经典浓缩特浓咖啡豆</p>
            <p class="d-c-price">¥ 25.5</p>
            <div class="d-c-info flex ver-stretch">
                <span>商品规格</span>
                <div class="detail-speci-item">
                    <input type="radio" name="detail-speci" class="detail-speci-input" checked/>
                    <span class="detail-speci-word">极硬豆</span>
                </div>
                <div class="detail-speci-item">
                    <input type="radio" name="detail-speci" class="detail-speci-input"/>
                    <span class="detail-speci-word">高硬豆</span>
                </div>
                <div class="detail-speci-item">
                    <input type="radio" name="detail-speci" class="detail-speci-input"/>
                    <span class="detail-speci-word">硬豆</span>
                </div>
            </div>
            <div class="d-c-info flex ver-stretch">
                <span>数量</span>
                <div class="d-c-num clearfix">
                    <a href="javascript:;" class="de-num de-num-dec"></a>
                    <input type="text" readonly class="de-num-show" value="1"/>
                    <a href="javascript:;" class="de-num de-num-add"></a>
                </div>
            </div>
            <a href="javascript:;" class="d-car-btn">确 认</a>
        </div>
    </div>
    <div class="hint">
        <div class="succ">
            <img src="img/correct-icon.png" alt=""/>
            <p>已加入购物车</p>
        </div>
        <div class="error">
            <img src="img/wrong-icon.png" alt=""/>
            <p>加入购物车失败</p>
        </div>
    </div>
</div>
<script src="js/jquery.min.js"></script>
<script src="js/swiper.jquery.min.js"></script>
<script>
    ;(function ($){
        var click = "ontouchstart" in document ? "touchstart" : "click";
        /*==顶部轮播==*/
        var swiperTop = new Swiper('#detail-swiper',{
            simulateTouch: false,
            slidesPerView: 1,
            paginationClickable: false,
            spaceBetween: 0,
            loop: true,
            autoplay: 3000,
            autoplayDisableOnInteraction: false,
            observer:true,
            observeParents:true
        });
        var tabController = $(".d-tab-controller");
        var tabControllerTop = tabController.offset().top;
        var tabcontrols = [];
        tabcontrols[0] = $(".detail-desc-box").eq(0).offset().top - 62,
        tabcontrols[1] = $(".detail-desc-box").eq(1).offset().top - 62,
        tabcontrols[2] = $(".detail-desc-box").eq(2).offset().top - 62;
        /*==滚动事件==*/
        $(".container").scroll(function (){
            /*==标题是否固定==*/
            if($(this).scrollTop() >= tabControllerTop){
                tabController.addClass("fixed");
            }else{
                tabController.removeClass("fixed");
            }
            /*==滚动切换==*/
            if($(this).scrollTop() >= tabcontrols[2]){
                $(".d-tab-controller").find("li").eq(2).addClass("active").siblings("li").removeClass("active");
            }else if($(this).scrollTop() >= tabcontrols[1]){
                $(".d-tab-controller").find("li").eq(1).addClass("active").siblings("li").removeClass("active");

            }else if($(this).scrollTop() >= tabcontrols[0]) {
                $(".d-tab-controller").find("li").eq(0).addClass("active").siblings("li").removeClass("active");
            }
        });
        /*==点击切换==*/
        $(".d-tab-controller").find("li").each(function (index, item){
            $(this).on(click, function (){
                $(this).addClass("active").siblings("li").removeClass("active");
                $(".container").animate({
                    scrollTop: tabcontrols[index]
                },300);
                return false;
            });
        });
        /*==点击加入购物车==*/
        $(".add-car-btn").on(click, function (){
            $(".de-car-crash").stop().fadeIn(500);
        });
        /*==加入购物车消失==*/
        $(".crash").on(click, function (){
            $(".de-car-crash").stop().fadeOut(500);
        });
        /*==数量增减==*/
        var desNum = parseInt($(".de-num-show").val());
        $(".de-num-add").on(click, function (){
            desNum = desNum>=99 ? desNum : desNum+1;
            $(".de-num-show").val(desNum);
        });
        $(".de-num-dec").on(click, function (){
            desNum = desNum<=1 ? desNum : desNum-1;
            $(".de-num-show").val(desNum);
        });
        /*==确认加购物车==*/
        $(".d-car-btn").on(click, function (){
            $(".de-car-crash").stop().fadeOut(300, function (){
                /*==提交成功==*/
                $(".hint").addClass("succ").stop().fadeIn(300, function (){
                    setTimeout(function (){
                        $(".hint").stop().fadeOut(300, function (){
                            $(this).removeClass("succ");
                        });
                    },1500)
                });
                /*==提交失败==*/
//                $(".hint").addClass("error").stop().fadeIn(500, function (){
//                    setTimeout(function (){
//                        $(".hint").stop().fadeOut(300, function (){
//                            $(this).removeClass("error");
//                        });
//                    },1500)
//                });
            });

        })
    })(jQuery);
</script>
</body>
</html>