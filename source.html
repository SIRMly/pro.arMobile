<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache"/>
    <meta name="renderer" content="webkit"/>
    <meta name="author" content="SIRMly">
    <meta name="keywords" content="安仁乐道,安仁溯源"/>
    <meta name="description" content="安仁乐道"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/source.css"/>
    <title>安仁乐道</title>
</head>
<body>
<audio src="audio/bgm.mp3" loop preload="auto" id="bgm"></audio>
<div class="page" id="page0">
    <img src="img/s-loading.gif" alt=""/>
</div>
<div class="page hide" id="page1">
    <div class="page1-bottom"></div>
    <img src="img/s-p1-left.png" alt="" class="page1-line-left"/>
    <img src="img/s-p1-right.png" alt="" class="page1-line-right"/>
    <img src="img/s-p1-tower.png" alt="" class="page1-tower"/>
    <img src="img/s-p1-word.png" alt="" class="page1-word1"/>
    <div class="page1-word2">
        <img src="img/s-p1-letter1.png" alt=""/>
        <img src="img/s-p1-letter2.png" alt=""/>
        <img src="img/s-p1-letter3.png" alt=""/>
        <img src="img/s-p1-letter4.png" alt=""/>
    </div>
    <div class="page-border"></div>
</div>
<div class="page page2 hide" id="page2">
    <img src="img/s-p2-pic.png" alt="" class="page2-pic"/>
    <img src="img/s-p2-title.png" alt="" class="page2-title"/>
    <img src="img/s-p2-word.png" alt="" class="page2-word"/>
    <div class="page-border"></div>
</div>
<div class="page page3 hide" id="page3">
    <img src="img/s-p3-pic.png" alt="" class="page2-pic"/>
    <img src="img/s-p2-title.png" alt="" class="page2-title"/>
    <img src="img/s-p3-word.png" alt="" class="page3-word"/>
    <div class="page-border"></div>
</div>
<div class="page page4 hide" id="page4">
    <img src="img/s-p4-pic.png" alt="" class="page2-pic"/>
    <img src="img/s-p4-title.png" alt="" class="page2-title"/>
    <img src="img/s-p4-word1.png" alt="" class="page4-word1"/>
    <div class="page4-word2 clearfix">
        <img src="img/s-p4-001.png" alt=""/>
        <img src="img/s-p4-002.png" alt=""/>
        <img src="img/s-p4-003.png" alt=""/>
        <img src="img/s-p4-004.png" alt=""/>
        <img src="img/s-p4-005.png" alt=""/>
        <img src="img/s-p4-006.png" alt=""/>
        <img src="img/s-p4-007.png" alt=""/>
        <img src="img/s-p4-008.png" alt=""/>
    </div>
    <div class="page-border"></div>
</div>
<div class="page page5 hide" id="page5">
    <div class="page5-pic"></div>
    <img src="img/s-p5-title.png" alt="" class="page2-title"/>
    <img src="img/s-p5-word1.png" alt="" class="page5-word1"/>
    <div class="page5-word2 clearfix">
        <img src="img/s-p5-003.png" alt=""/>
        <img src="img/s-p5-002.png" alt=""/>
        <img src="img/s-p5-001.png" alt=""/>
    </div>
    <div class="page-border"></div>
</div>
<div class="page page6 hide" id="page6">
    <img src="img/s-p6-pic.png" alt="" class="page6-pic"/>
    <img src="img/s-p5-title.png" alt="" class="page2-title"/>
    <img src="img/s-p6-word1.png" alt="" class="page5-word1"/>
    <div class="page4-word2 clearfix">
        <img src="img/s-p6-001.png" alt=""/>
        <img src="img/s-p6-002.png" alt=""/>
        <img src="img/s-p6-003.png" alt=""/>
        <img src="img/s-p6-004.png" alt=""/>
        <img src="img/s-p6-005.png" alt=""/>
        <img src="img/s-p6-006.png" alt=""/>
        <img src="img/s-p6-007.png" alt=""/>
    </div>
    <div class="page-border"></div>
</div>
<div class="page page7 hide" id="page7">
    <img src="img/s-p7-pic.png" alt="" class="page7-pic"/>
    <img src="img/s-p7-title.png" alt="" class="page2-title"/>
    <div class="page7-word2 clearfix">
        <img src="img/s-p7-001.png" alt=""/>
        <img src="img/s-p7-002.png" alt=""/>
        <img src="img/s-p7-003.png" alt=""/>
        <img src="img/s-p7-004.png" alt=""/>
        <img src="img/s-p7-005.png" alt=""/>
        <img src="img/s-p7-006.png" alt=""/>
    </div>
    <div class="page-border"></div>
</div>
<div class="page page8 hide" id="page8">
    <img src="img/s-p8-pic.png" alt="" class="page8-pic"/>
    <img src="img/s-p7-title.png" alt="" class="page2-title"/>
    <img src="img/s-p8-word.png" alt="" class="page8-word"/>
    <div class="page-border"></div>
</div>
<div class="page page9 hide" id="page9">
    <img src="img/s-p9-pic.png" alt="" class="page9-pic"/>
    <img src="img/s-p9-title.png" alt="" class="page2-title"/>
    <img src="img/s-p9-word.png" alt="" class="page9-word"/>
    <div class="page-border"></div>
</div>
<div class="page page10 hide" id="page10">
    <img src="img/s-p10-pic.png" alt="" class="page9-pic"/>
    <img src="img/s-p9-title.png" alt="" class="page2-title"/>
    <img src="img/s-p10-word.png" alt="" class="page10-word"/>
    <div class="page-border"></div>
</div>
<div class="page page11 hide" id="page11">
    <img src="img/s-p11-pic.png" alt="" class="page11-pic"/>
    <img src="img/s-p11-line.png" alt="" class="page11-line"/>
    <img src="img/s-p11-title.png" alt="" class="page11-title"/>
    <img src="img/s-p11-word.png" alt="" class="page11-word"/>
    <div class="page-border"></div>
</div>
<div class="s-arrow"></div>
<div class="music"></div>
<div id="orientLayer" class="mod-orient-layer">
    <div class="mod-orient-layer__content">
        <i class="icon mod-orient-layer__icon-orient"></i>
        <div class="mod-orient-layer__desc">为了更好的体验，请使用竖屏浏览</div>
    </div>
</div>
<script src="js/jquery.min.js"></script>
<script src="js/touch.min.js"></script>
<script>
    ;(function ($){
        var click = "ontouchstart" in document ? "touchstart" : "click";
        document.addEventListener('touchmove', function (e) {
            e.preventDefault();
        });
        var bgm = document.getElementById("bgm");
        bgm.src = "audio/bgm.mp3";
        document.addEventListener("WeixinJSBridgeReady", function () {
        }, false);
        var imgs = [
            "img/s-4-pic.png",
            "img/s-arrow.png",
            "img/s-border.png",
            "img/s-p1-left.png",
            "img/s-p1-letter1.png",
            "img/s-p1-letter2.png",
            "img/s-p1-letter3.png",
            "img/s-p1-letter4.png",
            "img/s-p1-right.png",
            "img/s-p1-tower.png",
            "img/s-p1-word.png",
            "img/s-p2-pic.png",
            "img/s-p2-word.png",
            "img/s-p2-title.png",
            "img/s-p3-pic.png",
            "img/s-p3-word.png",
            "img/s-p4-pic.png",
            "img/s-p4-word1.png",
            "img/s-p4-title.png",
            "img/s-p4-001.png",
            "img/s-p4-002.png",
            "img/s-p4-003.png",
            "img/s-p4-004.png",
            "img/s-p4-005.png",
            "img/s-p4-006.png",
            "img/s-p4-007.png",
            "img/s-p4-008.png",
            "img/s-p5-pic.png",
            "img/s-p5-word1.png",
            "img/s-p5-title.png",
            "img/s-p5-001.png",
            "img/s-p5-002.png",
            "img/s-p5-003.png",
            "img/s-p6-pic.png",
            "img/s-p6-word1.png",
            "img/s-p6-001.png",
            "img/s-p6-002.png",
            "img/s-p6-003.png",
            "img/s-p6-004.png",
            "img/s-p6-005.png",
            "img/s-p6-006.png",
            "img/s-p7-pic.png",
            "img/s-p7-title.png",
            "img/s-p7-001.png",
            "img/s-p7-002.png",
            "img/s-p7-003.png",
            "img/s-p7-004.png",
            "img/s-p7-005.png",
            "img/s-p7-006.png",
            "img/s-p8-pic.png",
            "img/s-p8-word.png",
            "img/s-p9-pic.png",
            "img/s-p9-word.png",
            "img/s-p9-title.png",
            "img/s-p10-pic.png",
            "img/s-p10-word.png",
            "img/s-p11-line.png",
            "img/s-p11-pic.png",
            "img/s-p11-title.png",
            "img/s-p11-word.png",
            "img/s-page1-bottom.png"
        ];
        preload(imgs);
        function preload(imgs,proBox){
            var proNum = 0,
                    count = imgs.length,
                    proPercentage = 0;
            for(var i in imgs){
                var newImg = new Image();
                newImg.src = imgs[i];
                newImg.onload = function (){
                    proNum++;
//                    proPercentage = Math.floor(proNum/count*100);
                    if(proNum>=count){
//                        proPercentage=100;
                        $("#page0").stop().fadeOut(500);
                        $("#page1").stop().fadeIn(500);
                        setTimeout(function(){
                            $(".music").addClass("play");
                            bgm.load();
                            bgm.play();
                            WeixinJSBridge.invoke('getNetworkType', {}, function (e) {
                                bgm.load();
                                bgm.play();
                            });
                        },0 )
                    }
//                    proBox.html(proPercentage+"%");
                }
            }
        }
        $(".music").on(click, function (){
            if(bgm.paused){
                bgm.play();
                $(".music").addClass("play");
            }else{
                bgm.pause();
                $(".music").removeClass("play");
            }
        });



        $(".page").each(function (index, item){
            (function (index){
                touch.on("#page"+index, "swipeup", function (){
                    nextPage(index, index+1, function (){});
                });
                touch.on("#page"+index, "swipedown", function (){
                    prePage(index, index-1, function (){});
                });
            })(index);
        });
        /*==下一页==*/
        function nextPage(thisPage, nextPage, callback) {
            if(thisPage<11){
                $("#page"+thisPage).stop().fadeOut(500);
                $("#page"+nextPage).stop().fadeIn(500, function () {
                    callback();
                });
            }else{
                $("#page11").stop().fadeOut(500);
                $("#page1").stop().fadeIn(500);
            }
        }
        /*==上一页==*/
        function prePage(thisPage, prePage, callback) {
            if(thisPage!=0){
                if(thisPage>1){
                    $(".page"+thisPage).stop().fadeOut(500);
                    $(".page"+prePage).stop().fadeIn(500, function () {
                        callback();
                    });
                }else{
                    $("#page1").stop().fadeOut(500);
                    $("#page11").stop().fadeIn(500);
                }
            }
        }





    })(jQuery);
</script>
</body>
</html>